srcdir = @srcdir@
VPATH = @srcdir@

include @top_srcdir@/mk/gnu.bsdvars.mk

.SUFFIXES: .xhtml .html .xml .css
DOCS = index guide reference examples debug status
SRCS += ${foreach DOC,${DOCS},${DOC}.xhtml}
TARGETS += ${foreach DOC,${DOCS},${DOC}.html}
RESOURCES = documentation.css

PARAMS += --stringparam XBL_SCRIPT_URL ${pkglibexecdir}/XBLUI.js
PARAMS += --stringparam pkgdefaultlibdir ${pkgdefaultlibdir}

all: build

build: ${TARGETS}

clean:
	-rm ${TARGETS}

install: ${TARGETS} ${RESOURCES}
	${INSTALL} ${TARGETS} ${pkgdocdir}/
	for FILE in ${RESOURCES}; do \
		${INSTALL} ${srcdir}/$${FILE} ${pkgdocdir}/; \
	done;

.xhtml.html :
	${HTMLWRAP} ${.IMPSRC} |\
	${HTMLPP} ${PARAMS} - > ${.TARGET}

