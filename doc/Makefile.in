srcdir = @srcdir@
VPATH = @srcdir@

include @top_srcdir@/mk/gnu.bsdvars.mk

.SUFFIXES: .xhtml .html .xml .css
DOCS = index guide reference examples debug status
SRCS += ${foreach DOC,${DOCS},${DOC}.xhtml}
TARGETS += ${foreach DOC,${DOCS},${DOC}.html}
RESOURCES = documentation.css

XSLTPROC = /usr/bin/xsltproc --novalid 
HTMLWRAP = ~/bin/HTMLPP-0.7/htmlwrap
TIDY = /usr/bin/tidy -q
URLINSTALL = ~/bin/URL-Utils-0.6/url-install


PARAMS += --stringparam XBL_SCRIPT_URL ${pkglibexecdir}/XBLUI.js
PARAMS += --stringparam pkgdefaultlibdir ${pkgdefaultlibdir}

all: build

build: ${TARGETS}

clean:
	-rm ${TARGETS}

install: ${TARGETS} ${RESOURCES}
	for FILE in ${TARGETS}; do \
		${URLINSTALL} $${FILE} ${pkgdocdir}/$${FILE}; \
	done;
	for FILE in ${RESOURCES}; do \
		${URLINSTALL} ${srcdir}/$${FILE} ${pkgdocdir}/$${FILE}; \
	done;

.xhtml.html :
	${HTMLWRAP} ${.IMPSRC} |\
	${HTMLPP} ${PARAMS} - > ${.TARGET}

